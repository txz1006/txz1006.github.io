消息中台

### 1.业务需求

每个系统或多或少都要使用到消息队列，要是每个系统都要实现一个消息队列还不如整合一个消息中台负责所有信息的发送管理，简化消息发送过程。

### 2.功能点

**批量信息发送接口和单个信息发送接口分开：**

单条消息发送：sendSms(String msgJson, String receiver)

批量信息发送：batchSendSms(String msgJson, Set<String> receivers)

对发送的消息进行**业务分类**，例如可以简单的分为通知，营销推广，短信提示(验证码)三类，三类消息都有各自不同的业务场景：通知有关注提醒、订阅新消息提醒等，营销有新参评信息提示等，短信提醒有验证码、到货信息等。



因为不同的业务分类要发送的消息量不同(例如：给500w关注者发送开播提醒，这个消息量要有专门的通道进行处理)，为了确保消息推送的实时性，需要可以选择**推送消息的通道**，将大小消息分开选择不同的通道进行推送。



此外，推送消息安装实时性可以有**定时推送**和**实时推送**之分，需要可以设置定时推送。



推送消息需要考虑**推送的频率不能过高**，对于已经推送过消息的用户，在之后一段时间内不再发送同意通道的推广消息(主要是营销业务消息)，还有夜间消息是否需要推迟到第二天在推送。



可以设置**消息模板**，最好根据模板信息进行消息的推送，这样有很多好处：

1.可以对发送的不同模板数据进行周期分类统计

2.简化调用方组织推送消息的的过程

3.系统出现问题好缩小问题范围



参考：https://mp.weixin.qq.com/s/EnvsPR2MjgCJl1-PFeoL9g

![image-20200922141147232](https://alex-img-1253982387.cos.ap-nanjing.myqcloud.com/Typora/20201102103803.png)

