### 2022年工作内容总结

涉及项目：B模块、开放平台、完校后台、标卡平台、运营平台、日志平台、短信平台、功能管理平台

下面是各项目在2022年的迭代内容。

- #### B模块

  系统做了21次升级，新增对接宿主24个（23个已上线，1个调试中），日常处理生产项目对接问题200+(B模块和开放平台)，完成业务开发及系统优化需求23个，系统新增对接应用数据483条

  具体升级内容如下：

  - 新增宿主：中行APP宿主、华腾应用宿主、银联电子校园卡宿主、树维一卡通宿主、黔农云宿主、树维优化宿主、华为钱包宿主、河南农业大学应用宿主、中浦院联想应用宿主、腾讯微校(卡)宿主、思政云应用宿主对接、陕西中医药大学优化宿主、中教智汇app宿主、工行app宿主、临商银行宿主、建融汇学自动绑卡宿主、海南医学院学校宿主、浙江水利水电学院学校宿主、山西机电职业技术学院宿主、讯飞教育云平台宿主、兴业银行游客登录模式宿主、四川电影电视学院宿主、讯飞移动端宿主、中信银行宿主
  - 支持获取微信支付openid改造宿主，标准绑卡宿主、迪科宿主、cassso宿主
  - 全量宿主错误提供页面优化展示效果（大部分已完成）
  - 标准绑卡宿主标识支持短码标识开发  
  - 增加企业微信自建应用管理对接功能
  - 增加宿主复制、宿主配置可提示、标卡快速入口生成功能
  - 中行宿主国密改造
  - 多次协调开发处理企业微信外嵌宿主流程相关问题
  - 常用宿主支持无一卡通环境下给水电系统传递三方用户信息接口
  - 补充宿主关键请求日志记录、细化log打印错误信息
  - 优化后台多个管理功能查询慢，没有查询条件问题
  - 优化请求链路，常用宿主可以减少一次JS回调访问消耗
  - 系统多次漏洞问题处理

  

  #### 2. 开放平台

  系统全年做了15次升级，新增业务对接接口12个，业务开发及系统优化类需求15个，新增开放平台应用数据590条

  具体升级内容如下：
  
  - 新增授权接口，标卡扫一扫JS参数接口、山西大学定制用户接口、安徽中医药大学水电明细接口、新退款接口、一卡通验证码业务安全接口、宁夏学校补助领取接口、台州学校一卡通查询接口
  - 新增非授权接口，去用户信息的S01004余额接口、获取用户14天位置接口
  - 新增基础用户信息接口增加token返回开关
  - 新增支付日志分表定时任务
  - 新增应用分组支持审核修改分组key
  - 新增开发者注册页面验证码限制，处理XSS防护问题
  - 新增绑卡页面增加可配置底部提示语
  - 新增客户端增加公有应用转私有应用按钮功能
  - 新增开发者密码重置功能
  - 新增对接标卡应用直接获取授权信息接口
  - 新增一卡通用户不存在时自动解绑卡功能
  - 新增通过MQ消费解绑卡信息，动态删除非授权接口用户缓存数据功能
  - 新增开放平台字典参数同步功能
  - 新增限制来源宿主卡类型绑卡功能
  - 新增JSAPI管理功能（待调试）
  - 开放平台返回页面改友好html页面提示（已改造一般左右）
  - 新增非授权接口加密入口
  - 补充宿主关键请求记录、细化log打印错误日志
  - 系统多次漏洞问题处理
  
  
  
  #### 总结
  
  截止目前为止，已基本熟悉了B模块及开放平台主体的业务内容，可以完成日常的开发、调试和技术支撑等工作。但是目前依旧存在较多问题需要解决，比如B模块过于分散的宿主代码结构，重复代码不少，可复用度较低；开放平台部分接口的兼容性较差、调用日志细化程度不够，问题排查困难等等。后续会围绕以上问题进行一些代码结构调整和功能完善补充。



#### 3. 日志平台

上半年内系统做了1次升级，新增业务功能2个，处理生产问题2次(CPU100%)

具体升级内容如下：

- 新请求日志类型改为通用格式
- 新增日志发送Kafka请求通道
- 升级系统Struts2和Fastjson依赖版本，处理漏洞问题



#### 4. 短信平台

- 新增华为云短信发送通道（待测试升级）
- 升级系统Struts2和Fastjson依赖版本，处理漏洞问题



#### 5. 完校后台

上半年内参与系统3次升级

具体升级内容如下：

- 完校5.5.3版本内容开发
- 山西大学定制用户接口开发
- 广告屏蔽功能新增同类型用户屏蔽功能
- 新增日志发送Kafka请求通道



#### 6. 标卡平台

上半年内参与系统2次升级，新增业务功能2个

具体升级内容如下：

- 新增标卡扫一扫JS参数接口、山西大学定制用户接口



#### 7. 运营平台

上半年内参与系统1次升级，新增业务功能2个

具体升级内容如下：

- 广告配置功能改造
- 广告屏蔽模块改造



#### 8. 功能管理平台

仅参与前期部分功能开发调试工作



